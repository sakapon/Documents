# 静的クラス (C#)

## 静的クラス以前に…
非静的クラスで Singleton パターン
- プロパティへのアクセス時にインスタンスを初期化
- スレッドセーフのためにロック

静的コンストラクター (private)
- クラスの初期化
  - メンバーの初回呼び出し時に実行
- リフレクションで静的コンストラクターを呼び出せる (破壊行為)

## 静的クラス
- `static class` で宣言
- インスタンス化できない
  - すべてのメンバーに static が付く

できないこと
- デストラクター (ファイナライザー)
- 継承、インターフェイス実装
  - IDisposable など
- XAML 系でデータバインディング (できるけど大変)

### 静的クラスを使わない場面
プロパティ、フィールドを持つ場合はインスタンスで
- 1か所でよいと思っていても、あとで複数必要になることが多い
  - 設定を差し替える、テストシナリオなど
- 前節のデメリットも理由

### 静的クラスを使う場面
- 関数
  - 数学など、外部要因に影響されない場合
- 拡張メソッド
  - 既存のクラス (インスタンス) にメソッドを後付け
- Facade パターン
  - ライブラリ化する場合、インスタンスと静的の両方を用意する

### その他
- `using static`
  - クラスをインポートすることで、クラス名を省略できる
- Visual Basic では Module

## 参照
- [作成したサンプル](https://github.com/sakapon/Samples-2018/tree/master/ProgrammingSample/UnitTest)
- [Type.TypeInitializerプロパティから静的コンストラクタを取得して呼び出す](https://t.co/dqq0C8k4h6)
